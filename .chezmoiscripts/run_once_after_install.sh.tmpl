#!/bin/bash

{{ if eq .osid "linux-fedora" -}}
{{- if .sudo -}}
sudo ~/.scripts/fedora_gnome_install_root.sh
{{ end -}}
~/.scripts/fedora_gnome_install_user.sh
{{- end -}}

{{ if .sudo -}}
# Install brew
command -v brew >/dev/null || { sudo -v && NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"; }
{{ end -}}
source ~/.bash_profile

# Setup gh-cli
brew bundle --file=.config/brewfile/Brewfile
gh auth status >/dev/null || gh auth login

# Install fisher
fish -c 'type -q fisher >/dev/null || begin; curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher update; end'

# Install go tools
# https://github.com/helix-editor/helix/wiki/How-to-install-the-default-language-servers#go
go install golang.org/x/tools/gopls@latest          # LSP
go install github.com/go-delve/delve/cmd/dlv@latest # Debugger
go install golang.org/x/tools/cmd/goimports@latest  # Formatter
